## ORM (Object Relational Mapping)

### 영속성 (Persistence)

- 데이터를 생성한 프로그램이 종료되더라도 사라지지 않는 데이터의 특성

- 영속성을 갖지 않는 데이터는 메모리에서만 존재하므로 프로그램을 종료하면 잃어버리게 됨

- Object Persistence (영속 객체)

  - 영속성을 부여받은 객체
  - 메모리 상의 데이터를 파일 시스템, 관계형 데이터베이스 혹은 객체 데이터베이스 등을 활용하여 영구적으로 저장 (JDBC, Persistence Framework (Hibernate, Mybatis 등) 사용)

- Persistence Layer

  - 프로그램의 아키텍쳐에서 데이터에 영속성을 부여해주는 계층
  - JDBC를 이용하여 직접 구현 가능하며 보통 Framework를 이용하여 개발

- Persistence Framework

  - JDBC 프로그래밍의 복잡함이나 번거로움 없이 간단한 작업만으로 데이터베이스와 연동되는 시스템을 빠르게 개발할 수 있으며, 안정적인 구동을 보장

  - SQL Mapper와 ORM으로 나눌 수 있음

  - SQL Mapper

    SQL 문장으로 직접 데이터베이스 데이터를 다룸. SQL을 명시해주어야 함

    (ex) Mybatis, JdbcTemplates 등

  - ORM

    객체를 통해 간접적으로 데이터베이스 데이터를 다룰 수 있게 해주며, 객체와 관계형 데이터베이스의 데이터를 자동으로 매핑 (연결) 한다.

    SQL Query가 아닌 직관적인 코드 (메소드)로 데이터를 조작할 수 있음 (객체 간의 관계를 바탕으로 SQL을 자동으로 생성한다.)

    Persistence API라고도 함

    (ex) JPA, Hibernate 등



### ORM (Object Relational Mapping, 객체-관계 매핑)

- 객체와 관계형 데이터베이스의 데이터를 자동으로 연결 해주는 것
  - 객체 지향 프로그램은 클래스 사용, 관계형 데이터베이스는 테이블을 사용하므로 두 모델 간 불일치 존재
  - ORM을 통해 객체 간 관계를 바탕으로 SQL을 자동으로 생성하여 불일치 해결
- 데이터베이스 데이터 <---> 매핑 <---> Object Field
  - 객체로 데이터베이스 데이터를 다룸
- 장점
  - 객체 지향적인 코드로 더 직관적이며, 비즈니스 로직에 더 집중할 수 있게 도와준다.
    - SQL query가 아닌 직관적인 코드 (메소드) 로 데이터 조작할 수 있어 객체 모델로 프로그래밍하는 데 집중할 수 있음
    - 선언문, 할당, 종료 등 부수적인 코드가 급격히 줄어듦
    - 객체에 대한 코드를 별도로 작성하므로 가독성을 올려줌
    - SQL의 절차, 순차적인 접근이 아닌 객체 지향적 접근으로 생산성 증가
  - 재사용 및 유지보수의 편리성 증가
    - ORM은 독립적으로 작성되어 있으며, 해당 객체 재활용 가능
    - 모델에서 가공된 데이터를 컨트롤러에 의해 뷰와 합쳐지는 형태로 디자인 패턴을 견고히 다질 수 있음
    - 매핑정보가 명확하여 ERD를 보는 것에 대한 의존도를 낮출 수 있음
  - DBMS에 대한 종속성이 줄어듦
    - 객체 간 관계를 바탕으로 SQL을 자동 생성하므로 RDBMS의 데이터 구조와 Java의 객체지향 모델 사이 간격을 좁힐 수 있음
    - DB에 종속적이지 않으므로 구현 방법 뿐만 아니라 솔루션에서 자료형 타입까지 유효
    - 극단적으로 DBMS를 교체하는 작업에도 비교적 적은 리스크와 시간이 소요됨
    - 개발 언어(플랫폼)의 기능을 이용할 수 있음 (Java equals, hashCode 등)
  - 단점
    - ORM으로만 서비스 구현하기가 어려움
      - 복잡한 로직은 query를 작성해야할 수 있음
      - 잘못 구현된 경우 성능 및 일관성에 문제가 생길 수 있음
      - DBMS 고유 기능을 이용하기 어려움 (but 고유기능을 이용하면 이식성은 낮아짐)
    - 프로시저가 많은 시스템에서 ORM의 객체 지향적인 장점을 활용하기 어려움



### 출처

> https://gmlwjd9405.github.io/2019/02/01/orm.html